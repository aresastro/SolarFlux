/*!
 * Start Bootstrap - Grayscale v3.3.7+1 (http://startbootstrap.com/template-overviews/grayscale)
 * Copyright 2013-2017 Start Bootstrap
 * Licensed under MIT (https://github.com/BlackrockDigital/startbootstrap/blob/gh-pages/LICENSE)
 */
var app=angular.module("flux",[]).controller("FluxCtrl",["$scope",function(a){function t(){for(var t=a.time,e=2440587.5+t/864e5,s=e+69.184/86400-2451545,M=0;M<a.planets.length;M++){var h=(s*a.planets[M].MDM+a.planets[M].MA)%360;a.planets[M].Phi=n(a.planets[M].e,h,10),a.planets[M].R=a.planets[M].a*(1-Math.pow(a.planets[M].e,2))/(1+a.planets[M].e*Math.cos(a.planets[M].Phi/180*Math.PI)),a.planets[M].flux=1370*(1/Math.pow(a.planets[M].R,2))}}function n(a,t,n){var s,M,h=Math.PI,l=30,p=0,o=Math.pow(10,-n);for(t/=360,t=2*h*(t-Math.floor(t)),s=a<.8?t:h,M=s-a*Math.sin(t)-t;Math.abs(M)>o&&p<l;)s-=M/(1-a*Math.cos(s)),M=s-a*Math.sin(s)-t,p+=1;return e(a,s,n)}function e(a,t,n){return K=Math.PI/180,S=Math.sin(t),C=Math.cos(t),fak=Math.sqrt(1-a*a),phi=Math.atan2(fak*S,C-a)/K,Math.round(phi*Math.pow(10,n))/Math.pow(10,n)}a.flux={distance:1},a.planetFlux=function(t){a.flux.distance=a.planets[t].a},a.time=new Date,a.planets=[{name:"earth",e:.0167086,sd:86400,sy:365.2422,y:31556926080,a:1.00000102,MA:358.617,MDM:.98560911311,Phi:0},{name:"mars",e:.0934,sd:88775.244147,sy:668.5991,y:59355048339,a:1.523679,MA:19.387,MDM:.52403958828,Phi:0},{name:"ceres",e:.075823,sd:32666.4,sy:4447.77606348,y:145292832e3,a:2.7675,MA:95.9891,MDM:.21407800764,Phi:0}],a.$watch("time",function(){t()})}]);